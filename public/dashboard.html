<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Xuân Tình Nguyện</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="dashboard.js" defer></script>
    <!-- Favicon for all devices -->
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/images/favicon.png">

    <!-- For iPhone/iPad (Home screen icon) -->
    <link rel="apple-touch-icon" href="/images/favicon.png">

    <!-- For Android Chrome -->
    <link rel="manifest" href="/manifest.json">

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#8b5a2b">
</head>

<body>
    <div id="toast"></div>
    <div class="main-wrapper">
    <div class="dashboard-container">

        <div class="left-menu">
        <img src="images/typo.png" alt="Title" class="title-img">
            <button class="menu-btn active" onclick="showTab('profile')">HỒ SƠ TÀI KHOẢN</button>
            <button class="menu-btn" onclick="showTab('registration')">ĐĂNG KÝ ĐỘI HÌNH ĐỊA PHƯƠNG</button>
            <button class="menu-btn" onclick="showTab('mediaTeam')">ĐỘI HÌNH TRUYỀN THÔNG</button>
            <button class="logout-btn" onclick="logout()">ĐĂNG XUẤT</button>
        </div>

        <div class="content">

            <!-- TAB: PROFILE -->
            <div id="profile" class="tab active">
                <h2>HỒ SƠ TÀI KHOẢN</h2>

                <div class="profile-field"><label>Họ và tên:</label><span id="pf_name"></span></div>
                <div class="profile-field"><label>MSSV:</label><span id="pf_studentId"></span></div>
                <div class="profile-field"><label>Lớp:</label><span id="pf_class"></span></div>
                <div class="profile-field"><label>Khoa:</label><span id="pf_faculty"></span></div>
                <div class="profile-field"><label>Trường:</label><span id="pf_university"></span></div>
                <div class="profile-field"><label>Email:</label><span id="pf_email"></span></div>
                <div class="profile-field"><label>Số điện thoại:</label><span id="pf_phone"></span></div>
                
                <hr style="margin: 20px 0; border: none; border-top: 1px solid #e6c184;">

                <h3 style="margin: 25px 0 15px; color: #8f4e00;">THÔNG TIN BUỔI PHỎNG VẤN</h3>

                <div class="profile-field">
                    <label>Ca phỏng vấn:</label>
                    <span id="pf_interviewCa"></span>
                </div>

                <!-- CHỈ OFFLINE MỚI HIỆN -->
                <div class="profile-field" id="interviewRoomRow">
                    <label>Phòng:</label>
                    <span id="pf_interviewRoom"></span>
                </div>

                <div class="profile-field">
                    <label>Thời gian:</label>
                    <span id="pf_interviewTime"></span>
                </div>

                <!-- CHỈ ONLINE MỚI HIỆN -->
                 <div class="profile-field" id="statusRow" style="display:none;">
                    <label>Trạng thái:</label>
                    <span id="pf_interviewStatus"></span>
                </div>
                <div class="profile-field" id="joinOnlineRow" style="display:none;">
                    <label></label>
                    <button class="submit-btn" onclick="joinOnlineInterview()">
                        Vào phòng phỏng vấn
                    </button>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #e6c184;">

                <h3 style="margin-bottom: 15px; color: #8f4e00;">KẾT QUẢ PHỎNG VẤN ĐỘI HÌNH CHUYÊN MÔN & ĐỊA PHƯƠNG</h3>

                    <div class="profile-field"><label>Trạng thái phỏng vấn:</label><span id="pf_interviewResult"></span></div>
                
                    <!-- ================================
                            BLOCK DÀNH CHO THÍ SINH ĐẬU
                        ================================ -->
                        <div id="passedBlock" class="passed-block">

                            <h3 class="passed-title">
                                THÔNG TIN SAU KHI TRÚNG TUYỂN
                            </h3>

                            <!-- ZALO GROUP -->
                            <div class="profile-field">
                                <label>Nhóm Zalo đội hình:</label>
                                <button
                                    id="zaloBtn"
                                    class="submit-btn"
                                    disabled
                                >
                                    Link Zalo sẽ được cập nhật sau
                                </button>
                            </div>

                            <hr class="passed-divider">

                            <!-- UPLOAD ẢNH 3x4 -->
                            <label class="photo-label">
                                Ảnh thẻ 3x4 (300x400)
                            </label>

                            <div class="photo-upload-row">
                                <!-- Preview -->
                                <img
                                    id="photoPreview"
                                    class="photo-preview"
                                    alt="Ảnh 3x4"
                                />

                                <!-- Upload -->
                                <div class="photo-upload-box">
                                    <input
                                        type="file"
                                        id="photoInput"
                                        accept="image/png,image/jpeg"
                                        class="input"
                                    />

                                    <button
                                        class="submit-btn photo-upload-btn"
                                        onclick="uploadPhoto3x4()"
                                    >
                                        Tải ảnh lên
                                    </button>

                                    <p class="photo-note">
                                        • Ảnh sẽ được tự động cắt & chuẩn hóa về 300x400<br>
                                        • Có thể thay đổi ảnh nhiều lần
                                    </p>
                                </div>
                            </div>
                        </div>
                <h3 style="margin: 25px 0 15px; color: #8f4e00;">KẾT QUẢ PHỎNG VẤN ĐỘI HÌNH TRUYỀN THÔNG</h3>

                    <div class="profile-field"><label>Trạng thái phỏng vấn:</label><span id="pf_media_interviewResult"></span></div>
            </div>

            <!-- TAB: REGISTRATION -->
            <div id="registration" class="tab">
                <!-- MESSAGE -->
    <div class="registration-closed" style="display:none;">
        <h3 style="color:#8f4e00; text-align:center;">
            Cảm ơn bạn đã quan tâm đến Chiến dịch Xuân Tình Nguyện 2026 của khoa Hóa học.
        </h3>
        <p style="text-align:center; line-height:1.6;">
            Hiện tại thời gian đăng ký đội hình đã kết thúc.<br>
            Ban Chỉ huy Chiến dịch hẹn gặp bạn ở Chiến dịch tiếp theo!
        </p>
    </div>
    <div class="registration-form">
                <h2>ĐĂNG KÝ THAM GIA ĐỘI HÌNH ĐỊA PHƯƠNG</h2>

                <label>Giới tính</label>
                <select id="gender" class="input" required>
                    <option value="">Chọn giới tính</option>
                    <option value="Nam">Nam</option>
                    <option value="Nữ">Nữ</option>
                </select>

                <label>Ngày tháng năm sinh</label>
                <input type="date" id="dob" class="input" required>

                 <label>Link Facebook</label>
                <input type="text" id="facebook" placeholder="https://facebook.com/tenban" class="input" required>

                <!-- NƠI Ở HIỆN TẠI -->
                <label>Nơi ở hiện tại</label>
                <input type="text" id="address" placeholder="Ghi rõ địa chỉ hiện tại" class="input" required>

                <!-- NGÀNH HỌC -->
                <label>Ngành học</label>
                <input type="text" id="major" placeholder="Nhập ngành học của bạn" class="input" required>

                <label>Giới thiệu bản thân</label>
                <textarea id="bio" required></textarea>
                <div id="bio_count" class="word-count">0 / 60 chữ</div>

                <label>Tình trạng sức khỏe</label>
                <textarea id="health" required></textarea>
                <div id="health_count" class="word-count">0 / 60 chữ</div>

                <!-- CÂU HỎI: ĐÃ TỪNG THAM GIA CHƯA -->
                <label>Đã từng tham gia CDTN Xuân tình nguyện?</label>
                <div class="checkboxes">
                    <label><input type="radio" name="cdtn" value="Đã từng" required> Đã từng tham gia</label>
                    <label><input type="radio" name="cdtn" value="Chưa từng" required> Chưa từng tham gia</label>
                </div>

                <!-- PHƯƠNG TIỆN DI CHUYỂN -->
                <label>Phương tiện di chuyển cá nhân</label>
                <div class="checkboxes">
                    <label><input type="radio" name="vehicle" value="Xe máy 50cc" required> Xe máy 50cc</label>
                    <label><input type="radio" name="vehicle" value="Xe máy trên 50cc" required> Xe máy trên 50cc</label>
                    <label><input type="radio" name="vehicle" value="Không" required> Không</label>
                </div>

                <!-- BẰNG LÁI -->
                <label>Bằng lái xe</label>
                <div class="checkboxes">
                    <label><input type="radio" name="license" value="Có" required> Có</label>
                    <label><input type="radio" name="license" value="Không" required> Không</label>
                </div>

                <!-- THỰC TẬP HÓA ĐẠI CƯƠNG -->
                <label>Đã học học phần Thực tập Hóa đại cương?</label>
                <div class="checkboxes">
                    <label><input type="radio" name="lab" value="Đã học" required> Đã học</label>
                    <label><input type="radio" name="lab" value="Chưa học" required> Chưa học</label>
                </div>

                <label>Khung giờ phỏng vấn</label>
                <div class="checkboxes">

                    <label style="opacity: 0.6; cursor: not-allowed; color: #888;">
                        <input type="radio" name="interviewLocation" value="Ca 1" disabled>
                        Ca 1 (08:00 - 11:30 ngày 13/12/25) – Cơ sở Linh Trung
                    </label>

                    <label style="opacity: 0.6; cursor: not-allowed; color: #888;">
                        <input type="radio" name="interviewLocation" value="Ca 2" disabled>
                        Ca 2 (13:00 - 16:00 ngày 13/12/25) – Cơ sở Linh Trung
                    </label>

                    <label>
                        <input type="radio" name="interviewLocation" value="Ca 3" required>
                        Ca 3 (08:00 - 11:30 ngày 14/12/25) – Cơ sở Nguyễn Văn Cừ
                    </label>

                    <label>
                        <input type="radio" name="interviewLocation" value="Ca 4" required>
                        Ca 4 (13:30 - 19:30 ngày 14/12/25) – Cơ sở Nguyễn Văn Cừ
                    </label>

                    <label style="opacity: 0.6; cursor: not-allowed; color: #888;">
                        <input type="radio" name="interviewLocation" value="Khác" disabled>
                        Khác (Vui lòng liên hệ lchhh.hcmus@gmail.com để xếp lịch phỏng vấn)
                    </label>

                </div>

                <!-- NGUYỆN VỌNG -->
                <label>Nguyện vọng 1</label>
                <select id="nv1" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                </select>

                <label>Nguyện vọng 2</label>
                <select id="nv2" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                    <option value="Không">Không</option>
                </select>

                <label>Nguyện vọng 3</label>
                <select id="nv3" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                    <option value="Không">Không</option>
                </select>

                <label>Nguyện vọng 4</label>
                <select id="nv4" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                    <option value="Không">Không</option>
                </select>

                <label>Nguyện vọng 5</label>
                <select id="nv5" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                    <option value="Không">Không</option>
                </select>

                <label>Nguyện vọng 6</label>
                <select id="nv6" class="input" required>
                    <option value="">-- chọn đội hình --</option>
                    <option value="Đội hình Chồi xuân">Đội hình Chồi xuân</option>
                    <option value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</option>
                    <option value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</option>
                    <option value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</option>
                    <option value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</option>
                    <option value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</option>
                    <option value="Không">Không</option>
                </select>

                <label>Kỹ năng</label>
                <div class="checkboxes">
                    <label><input type="checkbox" value="Dẫn chương trình"> Dẫn chương trình</label>
                    <label><input type="checkbox" value="Hoạt náo"> Hoạt náo</label>
                    <label><input type="checkbox" value="Thực hiện các thí nghiệm"> Thực hiện các thí nghiệm</label>
                    <label><input type="checkbox" value="Gói bánh chưng, bánh tét"> Gói bánh chưng, bánh tét</label>
                    <label><input type="checkbox" value="Vẽ tường"> Vẽ tường</label>
                    <label><input type="checkbox" value="Trang trí, làm đồ handmade"> Trang trí, làm đồ handmade</label>
                    <label><input type="checkbox" value="Văn nghệ (VD: hát, nhảy, đạo diễn tiết mục, sử dụng nhạc cụ)">Văn nghệ (VD: hát, nhảy, đạo diễn tiết mục, sử dụng nhạc cụ)</label>
                </div>

                <label>Size áo</label>
                <select id="size" class="input" required>
                    <option value="">Chọn size</option>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                    <option value="XXL">XXL</option>
                    <option value="XXXL">XXXL</option>
                </select>

                <button class="submit-btn" onclick="submitRegistration()">GỬI ĐĂNG KÝ</button>
            </div>
        </div>
            
            <!-- TAB: MEDIA TEAM -->
             <div id="mediaTeam" class="tab">

                <div class="registration-closed" style="display:none;">
        <h3 style="color:#8f4e00; text-align:center;">
            Cảm ơn bạn đã quan tâm đến Chiến dịch Xuân Tình Nguyện 2026 của khoa Hóa học.
        </h3>
        <p style="text-align:center; line-height:1.6;">
            Hiện tại thời gian đăng ký đội hình đã kết thúc.<br>
            Ban Chỉ huy Chiến dịch hẹn gặp bạn ở Chiến dịch tiếp theo!
        </p>
    </div>
        <div class="media-form">
                <h2>ĐĂNG KÝ ĐỘI HÌNH TRUYỀN THÔNG</h2>

                <label>Giới tính</label>
                    <select id="media_gender" class="input" required>
                        <option value="">Chọn giới tính</option>
                        <option value="Nam">Nam</option>
                        <option value="Nữ">Nữ</option>
                    </select>

                    <label>Ngày tháng năm sinh</label>
                    <input type="date" id="media_dob" class="input" required>

                    <label>Link Facebook</label>
                    <input type="text" id="media_facebook" placeholder="https://facebook.com/tenban" class="input" required>

                    <label>Nơi ở hiện tại</label>
                    <input type="text" id="media_address" placeholder="Ghi rõ địa chỉ hiện tại" class="input" required>

                    <label>Ngành học</label>
                    <input type="text" id="media_major" placeholder="Nhập ngành học của bạn" class="input" required>

                    <label>Giới thiệu bản thân</label>
                    <textarea id="media_bio" required></textarea>
                    <div id="media_bio_count" class="word-count">0 / 60 chữ</div>

                    <label>Tình trạng sức khỏe</label>
                    <textarea id="media_health" required></textarea>
                    <div id="media_health_count" class="word-count">0 / 60 chữ</div>

                    <label>Đã từng tham gia CDTN Xuân tình nguyện?</label>
                    <div class="checkboxes">
                        <label><input type="radio" name="media_cdtn" value="Đã từng" required> Đã từng tham gia</label>
                        <label><input type="radio" name="media_cdtn" value="Chưa từng" required> Chưa từng tham gia</label>
                    </div>

                    <label>Phương tiện di chuyển cá nhân</label>
                    <div class="checkboxes">
                        <label><input type="radio" name="media_vehicle" value="Xe máy 50cc" required> Xe máy 50cc</label>
                        <label><input type="radio" name="media_vehicle" value="Xe máy trên 50cc" required> Xe máy trên 50cc</label>
                        <label><input type="radio" name="media_vehicle" value="Không" required> Không</label>
                    </div>

                    <label>Bằng lái xe</label>
                    <div class="checkboxes">
                        <label><input type="radio" name="media_license" value="Có" required> Có</label>
                        <label><input type="radio" name="media_license" value="Không" required> Không</label>
                    </div>

                    <label>Bạn muốn đăng ký làm ở mảng nào?</label>
                    <div class="checkboxes">
                        <label><input type="checkbox" name="media_role" value="Tư liệu" required> Tư liệu</label>
                        <label><input type="checkbox" name="media_role" value="Thiết kế" required> Thiết kế</label>
                        <label><input type="checkbox" name="media_role" value="Content" required> Content</label>
                    </div>

                    <!-- NGUYỆN VỌNG -->
                    <label>Bạn có thể tham gia truyền thông ở đội hình đi địa phương nào? (có thể nhiều lựa chọn)</label>
                    <div class="checkboxes">
                        <label><input type="checkbox" name="media_locations" value="Đội hình Chồi xuân">Đội hình Chồi xuân</label>
                        <label><input type="checkbox" name="media_locations" value="Đội hình Khởi xuân an">Đội hình Khởi xuân an</label>
                        <label><input type="checkbox" name="media_locations" value="Đội hình Xuân chiến sĩ">Đội hình Xuân chiến sĩ</label>
                        <label><input type="checkbox" name="media_locations" value="Đội hình Xuân gắn kết">Đội hình Xuân gắn kết</label>
                        <label><input type="checkbox" name="media_locations" value="Đội hình Xuân đất thép">Đội hình Xuân đất thép</label>
                        <label><input type="checkbox" name="media_locations" value="Đội hình Xuân Bác Ái">Đội hình Xuân Bác Ái</label>
                    </div>

                    <label>Size áo</label>
                    <select id="media_size" class="input" required>
                        <option value="">Chọn size</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                        <option value="XXXL">XXXL</option>
                    </select>
                <button class="submit-btn" onclick="submitMediaTeam()">GỬI ĐĂNG KÝ ĐỘI HÌNH TRUYỀN THÔNG</button>
            </div>
            </div>
        </div>
    </div>
    </div>

<!-- Floating Feedback Button -->
<div id="feedbackButton">
    <img src="/icons/feedback.png" alt="feedback">
</div>


<div id="feedbackModal" class="modal">
    <div class="modal-content small">
        <h2 style="text-align:center; color:#5a3a1d;">Gửi Feedback</h2>

        <div id="ratingStars" class="rating-stars"></div>
        <div id="ratingValue" class="rating-value">0 / 5</div>

        <textarea id="feedbackText" placeholder="Góp ý của bạn giúp chúng mình cải thiện hơn ❤️"></textarea>

        <div class="btn-group" style="margin-top:10px;">
            <button class="save-btn" onclick="submitFeedback()">Gửi đánh giá</button>
            <button class="close-btn" onclick="closeFeedback()">Đóng</button>
        </div>
    </div>
</div>

    <footer class="footer">
        <strong>© 2025 Liên chi Hội khoa Hoá học,<br>
        Trường Đại học Khoa học tự nhiên, ĐHQG-HCM</strong>
  </footer>
</body>
</html>
