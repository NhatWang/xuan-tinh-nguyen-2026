<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard – XTN 2026</title>
<link rel="stylesheet" href="admin-dashboard.css">
<!-- Favicon for all devices -->
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/images/favicon.png">

    <!-- For iPhone/iPad (Home screen icon) -->
    <link rel="apple-touch-icon" href="/images/favicon.png">

    <!-- For Android Chrome -->
    <link rel="manifest" href="/manifest.json">

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#8b5a2b">
</head>

<body>

<!-- Toast -->
<div id="toast"></div>

<!-- SIDEBAR -->
<div class="sidebar">

    <h2>ADMIN DASHBOARD</h2>

    <!-- Admin Info -->
    <div class="admin-info">
        <img class="admin-avatar" id="adminAvatar"/>
        <div class="admin-name" id="adminName"></div>
        <div class="admin-email" id="adminEmail"></div>
    </div>

    <button class="menu-btn active" onclick="loadUsers()">
        Đội hình Chuyên môn & Địa phương
    </button>

    <button class="menu-btn" onclick="loadMediaList()">
        Đội hình Truyền thông
    </button>

    <!-- LOGOUT -->
    <button class="logout-btn" onclick="logoutAdmin()">
        Đăng xuất
    </button>

    <button class="menu-btn" onclick="goToTracker()">
        Theo dõi phỏng vấn
    </button>

</div>

<!-- MAIN -->
<div class="main">
    <h1 id="pageTitle">Đội hình Chuyên môn & Địa phương</h1>

    <!-- FILTER AREA -->
    <div class="filter-box">

        <div class="filter-row">
            <input 
                id="searchText" 
                type="text" 
                placeholder="Tìm theo tên hoặc MSSV..." 
                onkeyup="filterUsers()"
            />
        </div>

        <div class="filter-row">
            <select id="filterNV" onchange="filterUsers()">
                <option value="">Lọc theo nguyện vọng 1</option>
                <option value="Đội hình Chồi xuân">CX</option>
                <option value="Đội hình Khởi xuân an">KXA</option>
                <option value="Đội hình Xuân chiến sĩ">XCS</option>
                <option value="Đội hình Xuân gắn kết">XGK</option>
                <option value="Đội hình Xuân đất thép">XĐT</option>
                <option value="Đội hình Xuân Bác Ái">XBA</option>
            </select>

            <select id="filterStatus" onchange="filterUsers()">
                <option value="">Lọc theo trạng thái</option>

                <option value="Đậu NV1">Đậu NV1</option>
                <option value="Đậu NV2">Đậu NV2</option>
                <option value="Đậu NV3">Đậu NV3</option>
                <option value="Đậu NV4">Đậu NV4</option>
                <option value="Đậu NV5">Đậu NV5</option>
                <option value="Đậu NV6">Đậu NV6</option>

                <option value="Không đạt">Rớt</option>
                <option value="Chờ duyệt">Chờ duyệt</option>
                <option value="Chưa phỏng vấn">Chưa phỏng vấn</option>
            </select>
        </div>

                <!-- Lọc theo Ca phỏng vấn -->
        <div class="filter-row" id="filterCaRow">
            <select id="filterCa" onchange="filterUsers()">
                <option value="">Lọc theo Ca</option>
                <option value="Ca 1">Ca 1</option>
                <option value="Ca 2">Ca 2</option>
                <option value="Ca 3">Ca 3</option>
                <option value="Ca 4">Ca 4</option>
                <option value="Khác">Khác</option>
            </select>
        </div>

        <!-- Hiển thị tổng số đăng ký -->
        <div class="filter-row" id="totalRegRow">
            <strong>Tổng đơn: <span id="totalReg">0</span></strong>
        </div>


        <div class="filter-row" id="mediaFilterRow" style="display:none;">
            <select id="mediaFilterStatus" onchange="filterMedia()">
                <option value="">Lọc theo trạng thái</option>
                <option value="Đậu">Đậu</option>
                <option value="Rớt">Rớt</option>
                <option value="Chưa phỏng vấn">Chưa phỏng vấn</option>
            </select>
        </div>

        <div class="filter-row" id="mediaTotalRow" style="display:none;">
            <strong>Tổng đơn truyền thông: <span id="totalMedia">0</span></strong>
        </div>
    </div>

    <!-- USER TABLE -->
    <div class="table-wrapper">
    <table id="userTable">
        <thead>
            <tr>
                <th>Họ tên</th>
                <th>MSSV</th>
                <th>Email</th>

                <th>NV1</th>
                <th>NV2</th>
                <th>NV3</th>
                <th>NV4</th>
                <th>NV5</th>
                <th>NV6</th>

                <th>Facebook</th>
                <th>Ca phỏng vấn</th>
                <th>Trạng thái</th>
                <th>Hồ sơ</th>
                <th>Điểm danh</th>
                <th>STT Phỏng vấn</th>
                <th>Phỏng vấn</th>
                <th>Người phỏng vấn</th>
            </tr>
        </thead>

        <tbody id="tableBody"></tbody>
    </table>
    </div>
    <!-- MEDIA TABLE -->
    <div class="table-wrapper">
    <table id="mediaTable" style="display:none; margin-top:35px;">
        <thead>
            <tr>
                <th>Họ tên</th>
                <th>MSSV</th>
                <th>Email</th>

                <th>Vai trò</th>
                <th>Địa điểm</th>

                <th>Facebook</th>
                <th>Trạng thái</th>

                <th>Hồ sơ</th>
                <th>Phỏng vấn</th>
                <th>Người phỏng vấn</th>
                <th>Ghi chú</th>
            </tr>
        </thead>

        <tbody id="mediaTableBody"></tbody>
    </table>
</div>

<!-- =====================================
     PDF PREVIEW MODAL
===================================== -->
<div id="pdfModal" class="modal">
    <div class="modal-content large">
        <h2 style="margin-bottom: 15px;">Xem trước hồ sơ</h2>

        <iframe id="pdfFrame" style="width:100%; height:80vh; border:none;"></iframe>

        <div class="btn-group">
            <button class="close-btn" onclick="closePDFModal()">Đóng</button>
        </div>
    </div>
</div>

<!-- =====================================
     INTERVIEW MODAL
===================================== -->
<div id="interviewModal" class="modal">
    <div class="modal-content">

        <h2 style="margin-bottom: 15px;">Phỏng vấn</h2>

        <label>Ghi chú</label>
        <textarea id="interviewNote" placeholder="Nhập ghi chú..."></textarea>

        <label>Trạng thái phỏng vấn</label>
        <label style="display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="interviewPending"> Chờ duyệt
        </label>

        <label>Người phỏng vấn</label>
        <input id="interviewer" type="text" placeholder="Tên người phỏng vấn">

        <div class="btn-group" style="margin-top: 15px;">
            <button class="save-btn">Lưu</button>
            <button class="close-btn" onclick="closeInterviewModal()">Đóng</button>
        </div>
    </div>
</div>

<!-- =====================================
     MEDIA INTERVIEW MODAL
===================================== -->
<div id="mediaInterviewModal" class="modal">
    <div class="modal-content">

        <h2>Phỏng vấn đội hình Truyền thông</h2>

        <label>Ghi chú</label>
        <textarea id="mediaInterviewNote" placeholder="Nhập ghi chú..."></textarea>

        <label>Kết quả</label>
        <select id="mediaInterviewResult">
            <option value="">-- Chọn kết quả --</option>
            <option value="Đậu">Đậu</option>
            <option value="Rớt">Rớt</option>
        </select>

        <label>Người phỏng vấn</label>
        <input id="mediaInterviewer" type="text" placeholder="Tên người phỏng vấn">

        <div class="btn-group">
            <button class="save-btn" onclick="saveMediaInterview()">Lưu</button>
            <button class="close-btn" onclick="closeMediaInterviewModal()">Đóng</button>
        </div>

    </div>
</div>

<!-- =====================================
     RESULT MODAL
===================================== -->
<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2 id="resultModalTitle">Kết quả phỏng vấn</h2>

        <label>Kết quả cuối cùng</label>
        <select id="finalResult">
            <option value="Đậu NV1">Đậu nguyện vọng 1</option>
            <option value="Đậu NV2">Đậu nguyện vọng 2</option>
            <option value="Đậu NV3">Đậu nguyện vọng 3</option>
            <option value="Đậu NV4">Đậu nguyện vọng 4</option>
            <option value="Đậu NV5">Đậu nguyện vọng 5</option>
            <option value="Đậu NV6">Đậu nguyện vọng 6</option>
            <option value="Rớt">Rớt</option>
        </select>

        <div class="btn-group" style="margin-top: 15px;">
            <button class="save-btn" onclick="saveFinalResult()">Lưu</button>
            <button class="close-btn" onclick="closeResultModal()">Đóng</button>
        </div>
    </div>
</div>

<!-- NOTE VIEW MODAL -->
<div id="noteModal" class="modal">
    <div class="modal-content">
        <h2>Ghi chú phỏng vấn</h2>
        <p id="noteText"></p>

        <button class="close-btn" onclick="closeNoteModal()">Đóng</button>
    </div>
</div>

<script src="admin-dashboard.js"></script>

</body>
</html>
